<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.kvmial.blog.mapper.PostMapper">
    <select id="listPosts" resultMap="postMap">
            select * from `blog_post`
    </select>
    
    <select id="getPostByTitle" resultType="Post">
        select * from `blog_post` where title = #{title}
    </select>

    <select id="getPostByPath" resultType="Post">
        select * from `blog_post` where markdown_path = #{markdownPath}
    </select>
    
    <insert id="insertPost" useGeneratedKeys="true" parameterType="Post"  keyProperty="id">
        INSERT INTO `blog_post`(title,markdown_path,like_num,comment_num,read_num,status,is_sticky,cid,
        gmt_create,gmt_modified) VALUES (#{title},#{markdownPath},#{likeNum},#{commentNum},#{readNum},#{status},#{sticky},#{cid},
                                             #{gmtCreate},#{gmtModified})
    </insert>
    <resultMap id="postMap" type="Post" autoMapping="true">
        <result property="sticky" column="is_sticky" />
    </resultMap>
</mapper>